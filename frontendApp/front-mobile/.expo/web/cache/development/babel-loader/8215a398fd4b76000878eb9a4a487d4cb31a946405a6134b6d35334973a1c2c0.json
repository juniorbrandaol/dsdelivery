{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from \"axios\";\nimport storage from \"../storageServices/Storage\";\nvar BASE_URL = \"http://192.168.1.8:8081\";\nvar UserService = function () {\n  function UserService() {\n    _classCallCheck(this, UserService);\n  }\n  _createClass(UserService, [{\n    key: \"fetchLocalMapBox\",\n    value: function () {\n      var _fetchLocalMapBox = _asyncToGenerator(function* (local) {\n        return axios({\n          url: \"https://api.mapbox.com/geocoding/v5/mapbox.places/\" + local + \".json?access_token=\" + mapboxToken,\n          method: \"GET\"\n        }).then(function (response) {\n          return Promise.resolve(response);\n        }).catch(function (error) {\n          return Promise.reject(error);\n        });\n      });\n      function fetchLocalMapBox(_x) {\n        return _fetchLocalMapBox.apply(this, arguments);\n      }\n      return fetchLocalMapBox;\n    }()\n  }, {\n    key: \"saveUser\",\n    value: function () {\n      var _saveUser = _asyncToGenerator(function* (payLoad) {\n        return axios({\n          url: BASE_URL + \"/users/save\",\n          method: \"POST\",\n          data: payLoad\n        }).then(function (response) {\n          return Promise.resolve(response);\n        }).catch(function (error) {\n          if (error.response) {\n            if (error.response.status == 400) {\n              return Promise.reject(error.response.data.errors[0].message);\n            } else if (error.response.status == 403) {\n              return Promise.reject(error.response.data.error);\n            } else {\n              return Promise.reject(error.response);\n            }\n          } else if (error.request) {\n            alert(\"2\");\n            return Promise.reject(error.request);\n          } else {\n            alert(\"3\");\n            return Promise.reject(error);\n          }\n        });\n      });\n      function saveUser(_x2) {\n        return _saveUser.apply(this, arguments);\n      }\n      return saveUser;\n    }()\n  }, {\n    key: \"auth\",\n    value: function () {\n      var _auth = _asyncToGenerator(function* (data) {\n        return axios({\n          url: BASE_URL + \"/users/auth\",\n          data: data,\n          method: \"POST\"\n        }).then(function (response) {\n          return Promise.resolve(response);\n        }).catch(function (error) {\n          if (error.response) {\n            if (error.response.status === 403) {\n              return Promise.reject(error.response.data.message);\n            } else {\n              return Promise.reject(error.response);\n            }\n            return Promise.reject(error.response);\n          } else if (error.request) {\n            return Promise.reject(error);\n          } else {\n            return Promise.reject(error);\n          }\n        });\n      });\n      function auth(_x3) {\n        return _auth.apply(this, arguments);\n      }\n      return auth;\n    }()\n  }, {\n    key: \"authenticatedUser\",\n    value: function () {\n      var _authenticatedUser = _asyncToGenerator(function* () {\n        return axios({\n          url: BASE_URL + \"/users/currentusername\",\n          method: \"GET\",\n          headers: {\n            \"Authorization\": \"Bearer \" + (yield storage.getToken())\n          }\n        }).then(function (response) {\n          return Promise.resolve(response);\n        }).catch(function (error) {\n          if (error.response) {\n            return Promise.reject(error.response);\n          } else if (error.request) {\n            return Promise.reject(error);\n          } else {\n            return Promise.reject(error);\n          }\n        });\n      });\n      function authenticatedUser() {\n        return _authenticatedUser.apply(this, arguments);\n      }\n      return authenticatedUser;\n    }()\n  }, {\n    key: \"userIsAuthenticated\",\n    value: function () {\n      var _userIsAuthenticated = _asyncToGenerator(function* () {\n        return axios({\n          url: BASE_URL + \"/users/userisauthenticated\",\n          method: \"GET\",\n          headers: {\n            \"Authorization\": \"Bearer \" + (yield storage.getToken())\n          }\n        }).then(function (response) {\n          return Promise.resolve(response);\n        }).catch(function (error) {\n          if (error.response) {\n            return Promise.reject(error.response.status);\n          } else if (error.request) {\n            return Promise.reject(error);\n          } else {\n            return Promise.reject(error);\n          }\n        });\n      });\n      function userIsAuthenticated() {\n        return _userIsAuthenticated.apply(this, arguments);\n      }\n      return userIsAuthenticated;\n    }()\n  }, {\n    key: \"fetchVehicleByuserId\",\n    value: function () {\n      var _fetchVehicleByuserId = _asyncToGenerator(function* (userId) {\n        return axios({\n          url: BASE_URL + \"/vehicles/userId/\" + userId,\n          method: \"GET\",\n          headers: {\n            \"Authorization\": \"Bearer \" + (yield storage.getToken())\n          }\n        }).then(function (response) {\n          return Promise.resolve(response);\n        }).catch(function (error) {\n          if (error.response) {\n            return Promise.reject(error.response);\n          } else if (error.request) {\n            return Promise.reject(error);\n          } else {\n            return Promise.reject(error);\n          }\n        });\n      });\n      function fetchVehicleByuserId(_x4) {\n        return _fetchVehicleByuserId.apply(this, arguments);\n      }\n      return fetchVehicleByuserId;\n    }()\n  }]);\n  return UserService;\n}();\nvar userService = new UserService();\nexport default userService;","map":{"version":3,"names":["axios","storage","BASE_URL","UserService","_classCallCheck","_createClass","key","value","_fetchLocalMapBox","_asyncToGenerator","local","url","mapboxToken","method","then","response","Promise","resolve","catch","error","reject","fetchLocalMapBox","_x","apply","arguments","_saveUser","payLoad","data","status","errors","message","request","alert","saveUser","_x2","_auth","auth","_x3","_authenticatedUser","headers","getToken","authenticatedUser","_userIsAuthenticated","userIsAuthenticated","_fetchVehicleByuserId","userId","fetchVehicleByuserId","_x4","userService"],"sources":["C:/junior/projetos/dsdelivery/front-mobile/src/Services/apiServices/api.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport storage from '../storageServices/Storage'\r\nconst BASE_URL = \"http://192.168.1.8:8081\";\r\n//const mapboxToken=process.env.REACT_APP_ACCESS_TOKEN_MAP_BOX;\r\n\r\nclass UserService {\r\n\r\n   \r\n    async fetchLocalMapBox(local:string){\r\n       return axios({\r\n            url:`https://api.mapbox.com/geocoding/v5/mapbox.places/${local}.json?access_token=${mapboxToken}`,\r\n            method: \"GET\",\r\n        }).then((response) => {\r\n            return Promise.resolve(response)\r\n        }).catch((error) => { \r\n            return Promise.reject(error)\r\n        })\r\n   }\r\n\r\n     /******************* USER **********************/\r\n\r\n    //SALVA UM PEDIDO\r\n   async saveUser(payLoad:object) {\r\n\r\n    return axios({\r\n        url: BASE_URL + \"/users/save\",\r\n        method: \"POST\",\r\n        data: payLoad,\r\n    }).then((response) => {\r\n        return Promise.resolve(response)\r\n    }).catch((error) => {\r\n        if (error.response) { \r\n            if(error.response.status==400){\r\n              return Promise.reject(error.response.data.errors[0].message)  \r\n            }else if(error.response.status==403){\r\n              return Promise.reject(error.response.data.error)\r\n            }else{\r\n              return Promise.reject(error.response)\r\n            }\r\n        } else if (error.request) { \r\n            alert(\"2\")\r\n            return Promise.reject(error.request)\r\n        } else { \r\n            alert(\"3\")\r\n            // anything else \r\n            return Promise.reject(error)\r\n        } \r\n    })\r\n}\r\n\r\n    /******************** Auth *********************/\r\n\r\n    //RETORNA UM TOKEM DE AUTORIZAÇÃO\r\n    async auth(data:any) {\r\n       \r\n        return axios({\r\n            url: BASE_URL + \"/users/auth\",\r\n            data: data,\r\n            method: \"POST\",\r\n        }).then((response) => {\r\n            return Promise.resolve(response)\r\n        }).catch((error) => {\r\n            if (error.response) { \r\n                if(error.response.status===403){\r\n                    return Promise.reject(error.response.data.message)\r\n                }else{\r\n                    return Promise.reject(error.response)\r\n                }\r\n                // client received an error response (5xx, 4xx)\r\n                return Promise.reject(error.response)\r\n              } else if (error.request) { \r\n                // client never received a response, or request never left \r\n                return Promise.reject(error)\r\n              } else { \r\n                // anything else \r\n                return Promise.reject(error)\r\n              } \r\n        })\r\n    }\r\n\r\n    //RETORNA O USUARIO AUTENTICADO\r\n    async authenticatedUser() {\r\n       \r\n        return axios({\r\n            url: BASE_URL + \"/users/currentusername\",\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" +await storage.getToken(),\r\n            }\r\n        }).then((response) => {\r\n            return Promise.resolve(response)\r\n        }).catch((error) => {\r\n            if (error.response) { \r\n                // client received an error response (5xx, 4xx)\r\n                return Promise.reject(error.response)\r\n              } else if (error.request) { \r\n                // client never received a response, or request never left \r\n                return Promise.reject(error)\r\n              } else { \r\n                // anything else \r\n                return Promise.reject(error)\r\n              } \r\n        })\r\n    }\r\n\r\n    //VERIFICA SE AUTENTICADO\r\n    async userIsAuthenticated() {\r\n\r\n        return axios({\r\n            url: BASE_URL + \"/users/userisauthenticated\",\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\": \"Bearer \"+ await storage.getToken(),\r\n            }\r\n        }).then((response) => {\r\n            return Promise.resolve(response)\r\n        }).catch((error) => {\r\n            if (error.response) { \r\n                // client received an error response (5xx, 4xx)\r\n                return Promise.reject(error.response.status)\r\n              } else if (error.request) { \r\n                // client never received a response, or request never left \r\n                return Promise.reject(error)\r\n              } else { \r\n                // anything else \r\n                return Promise.reject(error)\r\n              } \r\n        })\r\n    }\r\n\r\n    /******************** Vehicles *********************/\r\n    \r\n    async fetchVehicleByuserId(userId:any) {\r\n       \r\n        return axios({\r\n            url: BASE_URL + \"/vehicles/userId/\"+userId,\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" +await storage.getToken(),\r\n            }\r\n        }).then((response) => {\r\n            return Promise.resolve(response)\r\n        }).catch((error) => {\r\n            if (error.response) { \r\n                // client received an error response (5xx, 4xx)\r\n                return Promise.reject(error.response)\r\n              } else if (error.request) { \r\n                // client never received a response, or request never left \r\n                return Promise.reject(error)\r\n              } else { \r\n                // anything else \r\n                return Promise.reject(error)\r\n              } \r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\nconst userService = new UserService();\r\nexport default userService;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}